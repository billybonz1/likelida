"use strict";(globalThis["webpackChunklikelida_project"]=globalThis["webpackChunklikelida_project"]||[]).push([[730],{2136:(t,e,s)=>{s.d(e,{J:()=>a});var r=s(3746),o=s(1569);const a=(0,r.Q_)("posts",{state:()=>({posts:null,ingredients:null,postSingle:null,currentUser:null}),getters:{getPosts:t=>(console.log("state.posts >>"),console.log(t.posts),t.posts),getIngredients:t=>(console.log("state.ingredients >>"),console.log(t.ingredients),t.ingredients),getPostSingle:t=>(console.log("state.postSingle >>"),console.log(t.postSingle),t.postSingle),getCurrentUser:t=>t.currentUser},actions:{setCurrentUser(t){this.currentUser=t},async loadAllPosts(){try{const t=await o.server.get("posts");return this.posts=t.data,!0}catch(t){if(t)throw t}},async loadPosts(t){try{const e=await o.server.get("posts-list",{params:{page:t}});return this.posts=e.data,!0}catch(e){if(e)throw e}},async loadAllIngredients(){try{const t=await o.server.get("ingredients");return this.ingredients=t.data,!0}catch(t){if(t)throw t}},async loadSearchByIngredients(t){try{const e=await o.server.get("search-by-ingredients?ids="+t);return this.ingredients=e.data.ingredients,this.posts=e.data.posts,!0}catch(e){if(e)throw e}},async loadSinglePost(t){try{const e=await o.server.get("posts/"+t);return this.postSingle=e.data.data,!0}catch(e){if(e)throw e}}},persist:!0})},3730:(t,e,s)=>{s.r(e),s.d(e,{default:()=>b});var r=s(9835),o=s(6970);const a={class:"font-mono"},n=(0,r._)("img",{src:"/images/menu_fridge.png"},null,-1),i=(0,r._)("img",{src:"/images/menu_recipes.png"},null,-1),l=(0,r.Uk)(" Logout ");function u(t,e,s,u,c,g){const d=(0,r.up)("q-avatar"),h=(0,r.up)("q-btn"),p=(0,r.up)("q-btn-group"),m=(0,r.up)("q-footer"),w=(0,r.up)("router-view"),f=(0,r.up)("q-page-container"),v=(0,r.up)("q-layout");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(v,{view:"hhh LpR fFf",class:(0,o.C_)(t.$route.name)},{default:(0,r.w5)((()=>["login"!==t.$route.name&&"register"!==t.$route.name?((0,r.wg)(),(0,r.j4)(m,{key:0,class:"text-primary vertical-middle text-center q-mt-md q-pb-sm q-pt-sm",style:{background:"none"}},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{rounded:"",class:"bg-white fly-menu"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{rounded:"",size:"lg",to:"/fridge"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{size:"30px"},{default:(0,r.w5)((()=>[n])),_:1})])),_:1}),(0,r.Wm)(h,{rounded:"",size:"lg",to:"/recipes"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{size:"30px"},{default:(0,r.w5)((()=>[i])),_:1})])),_:1}),c.user&&c.user.email?((0,r.wg)(),(0,r.j4)(h,{key:0,onClick:e[0]||(e[0]=t=>g.logout())},{default:(0,r.w5)((()=>[l])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w)])),_:1})])),_:1},8,["class"])])}var c=s(2136);const g={data(){return{user:{},store:null,server:null}},mounted(){this.server=this.$axios.create({baseURL:"https://likelida.com/api"}),this.checkAuth()},methods:{async logout(){const t=await this.server.post("logout",{},{headers:{"Access-Control-Allow-Origin":"*"}});t.data.status?(this.store.setCurrentUser(null),localStorage.removeItem("token"),this.$axios.defaults.headers.common.Authorization="",this.user={},this.$router.push("/")):alert("Error(")},async checkAuth(){this.store=(0,c.J)();const t=await this.server.post("isLogin",{},{headers:{"Access-Control-Allow-Origin":"*"}});t.data.isLogin&&this.store.setCurrentUser(t.data.user),this.user=this.store.getCurrentUser}},watch:{$route(t,e){this.server=this.$axios.create({baseURL:"https://likelida.com/api"}),this.checkAuth()}}};var d=s(1639),h=s(7605),p=s(1378),m=s(7236),w=s(9379),f=s(1357),v=s(2133),y=s(9984),k=s.n(y);const _=(0,d.Z)(g,[["render",u]]),b=_;k()(g,"components",{QLayout:h.Z,QFooter:p.Z,QBtnGroup:m.Z,QBtn:w.Z,QAvatar:f.Z,QPageContainer:v.Z})}}]);