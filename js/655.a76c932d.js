"use strict";(globalThis["webpackChunklikelida_project"]=globalThis["webpackChunklikelida_project"]||[]).push([[655],{3642:(s,e,t)=>{t.d(e,{f:()=>r});var a=t(1569),o=t(2136);const r={data(){return{store:null,msg:{email:!1,password:!1},reg:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},beforeMount(){this.store=(0,o.J)(),this.isLogin()},methods:{validateEmail(){this.reg.test(this.email)?this.msg.email="":this.msg.email="Please enter a valid email address"},validatePassword(){this.password!==this.confirmPassword?this.msg.password="Passwords do not match":this.msg.password=""},async isLogin(){const s=await a.server.post("isLogin",{},{headers:{"Access-Control-Allow-Origin":"*"}});s.data.isLogin&&(this.store.setCurrentUser(s.data.user),this.$router.push("recipes"))}}}},2136:(s,e,t)=>{t.d(e,{J:()=>r});var a=t(3746),o=t(1569);const r=(0,a.Q_)("posts",{state:()=>({posts:null,ingredients:null,postSingle:null,currentUser:null}),getters:{getPosts:s=>(console.log("state.posts >>"),console.log(s.posts),s.posts),getIngredients:s=>(console.log("state.ingredients >>"),console.log(s.ingredients),s.ingredients),getPostSingle:s=>(console.log("state.postSingle >>"),console.log(s.postSingle),s.postSingle),getCurrentUser:s=>s.currentUser},actions:{setCurrentUser(s){this.currentUser=s},async loadAllPosts(){try{const s=await o.server.get("posts");return this.posts=s.data,!0}catch(s){if(s)throw s}},async loadPosts(s){try{const e=await o.server.get("posts-list",{params:{page:s}});return this.posts=e.data,!0}catch(e){if(e)throw e}},async loadAllIngredients(){try{const s=await o.server.get("ingredients");return this.ingredients=s.data,!0}catch(s){if(s)throw s}},async loadSearchByIngredients(s){try{const e=await o.server.get("search-by-ingredients?ids="+s);return this.ingredients=e.data.ingredients,this.posts=e.data.posts,!0}catch(e){if(e)throw e}},async loadSinglePost(s){try{const e=await o.server.get("posts/"+s);return this.postSingle=e.data.data,!0}catch(e){if(e)throw e}}},persist:!0})},2655:(s,e,t)=>{t.r(e),t.d(e,{default:()=>Z});var a=t(9835),o=t(6970);const r={class:"mx-auto max-w-4xl mb-5 relative",style:{padding:"20px"}},i=(0,a.Uk)(" ← "),l=(0,a._)("h5",{class:"mt-5",style:{"margin-bottom":"20px"}},"Login with Email",-1),n={class:"row items-center all-pointer-events"},d=(0,a.Uk)(" Email "),c=(0,a.Uk)("Email address"),g={class:"row items-center all-pointer-events"},m=(0,a.Uk)(" Password "),u=(0,a.Uk)("Password"),p=(0,a.Uk)(" LOGIN "),h=(0,a.Uk)(" Do not have an account yet? ");function w(s,e,t,w,f,b){const y=(0,a.up)("q-btn"),v=(0,a.up)("q-icon"),k=(0,a.up)("q-tooltip"),_=(0,a.up)("q-input");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(y,{flat:"",to:"/",style:{cursor:"pointer"}},{default:(0,a.w5)((()=>[i])),_:1}),l,(0,a._)("div",null,[""!==f.message?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,o.C_)([{error:this.error,success:!this.error},"message"])},(0,o.zw)(f.message),3)):(0,a.kq)("",!0),(0,a.Wm)(_,{error:!!s.msg.email,"error-message":s.msg.email,onBlur:s.validateEmail,white:"",rounded:"",outlined:"",borderless:"",modelValue:f.email,"onUpdate:modelValue":e[0]||(e[0]=s=>f.email=s),"label-slot":"",clearable:"",class:"text-white rounded-borders"},{label:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(v,{class:"q-mr-xs",size:"24px",name:"mail"}),d,(0,a.Wm)(k,{class:"bg-grey-8",anchor:"top left",self:"bottom left",offset:[0,8]},{default:(0,a.w5)((()=>[c])),_:1})])])),_:1},8,["error","error-message","onBlur","modelValue"]),(0,a.Wm)(_,{rounded:"",outlined:"",modelValue:f.password,"onUpdate:modelValue":e[2]||(e[2]=s=>f.password=s),type:f.isPwd?"password":"text","label-slot":"",clearable:"",class:"mt-5 q-field--with-bottom"},{label:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(v,{class:"q-mr-xs",size:"24px",name:"password"}),m,(0,a.Wm)(k,{class:"bg-grey-8",anchor:"top left",self:"bottom left",offset:[0,8]},{default:(0,a.w5)((()=>[u])),_:1})])])),append:(0,a.w5)((()=>[(0,a.Wm)(v,{name:f.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=s=>f.isPwd=!f.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,a.Wm)(y,{loading:f.loading,onClick:e[3]||(e[3]=s=>b.login()),disable:b.disabledButton,class:"bg-primary",style:{color:"#fff",display:"block",margin:"0 auto"}},{default:(0,a.w5)((()=>[p])),_:1},8,["loading","disable"])]),(0,a.Wm)(y,{flat:"",to:"/register"},{default:(0,a.w5)((()=>[h])),_:1})])}var f=t(499),b=t(1569),y=t(3642),v=t(2136);const k={mixins:[y.f],data(){return{password:(0,f.iH)(""),isPwd:(0,f.iH)(!0),email:(0,f.iH)(""),loading:!1,error:!1,message:"",store:null}},mounted(){this.store=(0,v.J)()},computed:{disabledButton(){return!(""!==this.password&&""===this.msg.email)}},methods:{async login(){this.error=!1,this.message="";const s={email:this.email,password:this.password};this.loading=!0;const e=await b.server.post("login",s,{headers:{"Access-Control-Allow-Origin":"*"}});this.loading=!1,""!==e.data.error&&(this.error=!0,"Unauthorized"===e.data.error?this.message="Login data is not correct":this.message=e.data.error),!0===e.data.status&&(localStorage.setItem("token",e.data.access_token),b.axios.defaults.headers.common.Authorization="Bearer "+e.data.access_token,this.store.setCurrentUser(e.data.user),this.$router.push("recipes")),console.log(e)}}};var _=t(1639),U=t(9379),P=t(6611),x=t(2857),C=t(6858),W=t(8149),A=t(9984),S=t.n(A);const q=(0,_.Z)(k,[["render",w]]),Z=q;S()(k,"components",{QBtn:U.Z,QInput:P.Z,QIcon:x.Z,QTooltip:C.Z,QField:W.Z})}}]);